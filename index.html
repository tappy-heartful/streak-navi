<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="images/favicon.png" type="image/png" />
    <title>Streak Navi(仮)</title>
  </head>

  <body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="functions.js"></script>
    <script>
      let appsettings = [];
      // ページ読み込み時の初期化処理
      $(document).ready(async function () {
        try {
          // 設定ファイルを読み込み(TODO ログイン画面に移動)
          appsettings = await getJsonData('appsettings.json');

          // セッションストレージに保存(TODO ログイン画面に移動)
          clearAllAppSession(); // 一度全削除
          Object.keys(appsettings).forEach((key) => {
            setSession(key, appsettings[key]);
          });
          setSession('isLogin', false);

          // ログイン画面へ
          window.location.href = '/app/login/login.html';
        } catch (error) {
          // データ読み込み失敗時にエラー表示
          showError('Failed:', error);
        }
      });
    </script>
  </body>
</html>
